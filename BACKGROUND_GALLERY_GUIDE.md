# Dream Background Gallery Guide

꿈 이미지들을 배경에 그리드 형태로 오버레이하는 기능이 추가되었습니다.

## 🎨 기능 설명

업로드된 꿈 이미지들이 배경에 몽환적인 그리드 패턴으로 표시됩니다:

- ✨ **부드러운 애니메이션**: 이미지들이 천천히 떠다니는 듯한 효과
- 🌫️ **노이즈 오버레이**: 필름 그레인 효과로 빈티지 느낌 연출
- 🌅 **그라디언트 비네팅**: 중앙에서 가장자리로 자연스럽게 어두워짐
- 🔲 **그리드 레이아웃**: 4x3 그리드로 최대 12개 이미지 표시
- 💫 **은은한 블러**: 2px 블러로 부드러운 배경 효과

## 🎛️ 커스터마이징

`SimpleDreamInterface.tsx`에서 설정을 조정할 수 있습니다:

```tsx
<DreamBackgroundGallery
  images={backgroundImages}
  opacity={0.12}              // 배경 투명도 (0-1)
  animationSpeed="slow"       // 애니메이션 속도: slow, medium, fast
  noiseIntensity={0.25}       // 노이즈 강도 (0-1)
/>
```

### 설정 옵션

**opacity** (투명도)
- `0.05-0.1`: 매우 은은함 (추천: 텍스트가 많을 때)
- `0.12-0.15`: 적당함 (기본값)
- `0.2-0.3`: 강조됨 (추천: 갤러리 페이지)

**animationSpeed** (애니메이션 속도)
- `slow`: 30초 주기 - 차분하고 명상적인 느낌
- `medium`: 20초 주기 - 균형잡힌 움직임
- `fast`: 10초 주기 - 역동적인 분위기

**noiseIntensity** (노이즈 강도)
- `0.1-0.2`: 미세한 텍스처
- `0.25-0.3`: 빈티지 필름 느낌 (기본값)
- `0.4-0.5`: 강한 그레인 효과

## 📐 레이아웃

### 데스크톱 (4x3 그리드)
```
┌────┬────┬────┬────┐
│ 1  │ 2  │ 3  │ 4  │
├────┼────┼────┼────┤
│ 5  │ 6  │ 7  │ 8  │
├────┼────┼────┼────┤
│ 9  │ 10 │ 11 │ 12 │
└────┴────┴────┴────┘
```

### 모바일 (3x4 그리드)
```
┌────┬────┬────┐
│ 1  │ 2  │ 3  │
├────┼────┼────┤
│ 4  │ 5  │ 6  │
├────┼────┼────┤
│ 7  │ 8  │ 9  │
├────┼────┼────┤
│ 10 │ 11 │ 12 │
└────┴────┴────┘
```

## 🎬 애니메이션 효과

각 이미지는 독립적으로 애니메이션됩니다:

1. **위치 이동**: -10px ~ 10px 범위로 자연스럽게 떠다님
2. **스케일 변화**: 0.98 ~ 1.05 사이로 미세하게 확대/축소
3. **투명도 변화**: 설정된 opacity ± 20% 범위로 깜빡임
4. **순차 시작**: 각 이미지가 2초씩 지연되어 시작 (자연스러운 흐름)

## 🖼️ 이미지 필터링

다음 이미지들은 자동으로 제외됩니다:

- ❌ 기본 이미지 (`/Default-dream.png`)
- ❌ Base64 인코딩된 이미지 (마이그레이션 전 이미지)
- ❌ 이미지가 없는 꿈

최대 12개의 유효한 이미지만 선택되어 표시됩니다.

## 🔧 성능 최적화

- **Lazy Loading**: 이미지가 필요할 때만 로드
- **CSS 애니메이션**: GPU 가속 활용
- **이미지 제한**: 최대 12개로 메모리 사용 제한
- **SSR 방지**: 클라이언트 사이드에서만 렌더링

## 📱 반응형 디자인

- **데스크톱**: 4x3 그리드, 20px 간격, 20px 둥근 모서리
- **모바일**: 3x4 그리드, 10px 간격, 10px 둥근 모서리
- **자동 조정**: 화면 크기에 따라 자동으로 레이아웃 변경

## 🎨 스타일 커스터마이징

`DreamBackgroundGallery.tsx` 파일에서 다음을 수정할 수 있습니다:

### 블러 효과 변경
```css
.dream-background-grid {
  filter: blur(2px); /* 0-5px 권장 */
}
```

### 그리드 간격 조정
```css
.dream-background-grid {
  gap: 20px; /* 원하는 간격 */
}
```

### 둥근 모서리 변경
```css
.dream-background-item {
  border-radius: 20px; /* 0-30px 권장 */
}
```

### 비네팅 강도 조정
```css
.gradient-overlay {
  background: radial-gradient(
    circle at center,
    transparent 0%,
    rgba(0, 0, 0, 0.3) 100% /* 마지막 값 조정 */
  );
}
```

## 🧪 테스트 방법

1. **앱 실행**
   ```bash
   npm run dev
   ```

2. **꿈 이미지 업로드**
   - 최소 3-4개의 꿈에 이미지를 업로드하세요
   - Supabase Storage에 저장된 이미지만 배경에 표시됩니다

3. **효과 확인**
   - 배경에 그리드 패턴이 나타나는지 확인
   - 이미지들이 천천히 움직이는지 확인
   - 노이즈 효과가 적용되었는지 확인

4. **설정 조정**
   - opacity, animationSpeed, noiseIntensity 값을 변경해가며 테스트
   - 원하는 분위기를 찾을 때까지 조정

## 💡 활용 팁

### 최적의 이미지
- 밝은 색상의 파스텔 톤 이미지
- 꿈같은 풍경 사진
- 추상적인 패턴
- 수채화 스타일의 그림

### 분위기별 설정

**차분하고 명상적인 분위기**
```tsx
opacity={0.08}
animationSpeed="slow"
noiseIntensity={0.15}
```

**활기차고 역동적인 분위기**
```tsx
opacity={0.2}
animationSpeed="fast"
noiseIntensity={0.4}
```

**빈티지/레트로 분위기**
```tsx
opacity={0.15}
animationSpeed="medium"
noiseIntensity={0.5}
```

**미니멀/모던 분위기**
```tsx
opacity={0.05}
animationSpeed="slow"
noiseIntensity={0.1}
```

## 🐛 문제 해결

### 배경이 보이지 않는 경우
1. 이미지가 업로드되었는지 확인
2. Supabase Storage 버킷이 생성되었는지 확인
3. 브라우저 콘솔에서 오류 메시지 확인
4. `backgroundImages.length`가 0보다 큰지 확인

### 애니메이션이 끊기는 경우
1. 이미지 개수를 줄이기 (12개 → 6개)
2. 애니메이션 속도를 느리게 조정
3. 블러 효과 줄이기 (2px → 1px)

### 텍스트가 안 보이는 경우
1. opacity를 낮추기 (0.12 → 0.06)
2. 그라디언트 비네팅 강화
3. 배경색 조정

## 🎯 다음 단계

- [ ] 사용자가 UI에서 직접 설정을 조정할 수 있는 컨트롤 추가
- [ ] 다양한 레이아웃 패턴 (육각형, 원형 등)
- [ ] 특정 태그의 이미지만 필터링하는 기능
- [ ] 시간대별로 다른 배경 효과 (아침/저녁)
